# TaskMaster Workflow Orchestration Engine Configuration
# Consolidated environment variables from PRs #50 and #63

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL Database Settings
DATABASE_TYPE=postgresql
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=codegen-taskmaster-db
DATABASE_USERNAME=software_developer
DATABASE_PASSWORD=your_secure_password
DATABASE_SSL=true

# Connection Pool Settings
DB_READ_POOL_MIN=2
DB_READ_POOL_MAX=12
DB_WRITE_POOL_MIN=1
DB_WRITE_POOL_MAX=6
DB_ANALYTICS_POOL_MIN=1
DB_ANALYTICS_POOL_MAX=2
DB_ACQUIRE_TIMEOUT=60000
DB_IDLE_TIMEOUT=30000

# =============================================================================
# WORKFLOW ENGINE CONFIGURATION
# =============================================================================

# Core Engine Settings
MAX_CONCURRENT_WORKFLOWS=10
DEFAULT_WORKFLOW_TIMEOUT=3600000
ENABLE_WORKFLOW_METRICS=true
ENABLE_WORKFLOW_RECOVERY=true

# Retry Policy
MAX_WORKFLOW_RETRIES=3
WORKFLOW_RETRY_DELAY=5000
RETRY_BACKOFF_MULTIPLIER=2

# State Management
STATE_CACHE_SIZE=1000
STATE_PERSIST_INTERVAL=5000
STATE_RETENTION_DAYS=30
ENABLE_STATE_COMPRESSION=true

# Step Execution
STEP_DEFAULT_TIMEOUT=300000
STEP_MAX_RETRIES=3
STEP_RETRY_DELAY=1000
STEP_RETRY_BACKOFF=2
ENABLE_STEP_METRICS=true

# Parallel Processing
MAX_CONCURRENT_STEPS=5
PARALLEL_MEMORY_LIMIT=4GB
PARALLEL_CPU_LIMIT=4 cores
PARALLEL_DISK_LIMIT=20GB
PARALLEL_QUEUE_TIMEOUT=30000
ENABLE_LOAD_BALANCING=true
ENABLE_RESOURCE_MONITORING=true
PARALLEL_FAILURE_STRATEGY=continue

# =============================================================================
# AGENT CONFIGURATION
# =============================================================================

# Claude Code Agent
CLAUDE_CODE_ENDPOINT=http://localhost:3001
CLAUDE_CODE_API_KEY=your_claude_code_api_key
CLAUDE_CODE_TIMEOUT=300000
CLAUDE_CODE_MAX_CONCURRENT=3
CLAUDE_CODE_RETRY_COUNT=2
CLAUDE_CODE_WEIGHT=1.0

# Codegen Agent
CODEGEN_ENDPOINT=http://localhost:3002
CODEGEN_API_KEY=your_codegen_api_key
CODEGEN_TIMEOUT=120000
CODEGEN_MAX_CONCURRENT=5
CODEGEN_RETRY_COUNT=2
CODEGEN_WEIGHT=1.0

# Aider Agent
AIDER_ENDPOINT=http://localhost:3003
AIDER_API_KEY=your_aider_api_key
AIDER_TIMEOUT=180000
AIDER_MAX_CONCURRENT=2
AIDER_RETRY_COUNT=2
AIDER_WEIGHT=0.8

# Goose Agent
GOOSE_ENDPOINT=http://localhost:3004
GOOSE_API_KEY=your_goose_api_key
GOOSE_TIMEOUT=240000
GOOSE_MAX_CONCURRENT=2
GOOSE_RETRY_COUNT=1
GOOSE_WEIGHT=0.7

# Agent Health Checks
ENABLE_AGENT_HEALTH_CHECK=true
AGENT_HEALTH_CHECK_INTERVAL=30000
AGENT_HEALTH_CHECK_TIMEOUT=5000
AGENT_HEALTH_CHECK_RETRIES=3

# Agent Load Balancing
ENABLE_AGENT_LOAD_BALANCING=true
AGENT_LOAD_BALANCE_STRATEGY=round_robin

# =============================================================================
# INFRASTRUCTURE CONFIGURATION
# =============================================================================

# Cloudflare Proxy Settings
CLOUDFLARE_PROXY_ENABLED=true
CLOUDFLARE_TUNNEL_ID=your_tunnel_id
CLOUDFLARE_PROXY_HOSTNAME=db.taskmaster.com
CLOUDFLARE_CREDENTIALS_FILE=/etc/cloudflared/credentials.json
CLOUDFLARE_LOG_LEVEL=info

# Cloudflare Access
CLOUDFLARE_ACCESS_ENABLED=true
CLOUDFLARE_TEAM_DOMAIN=your_team_domain
CLOUDFLARE_APPLICATION_AUD=your_application_aud

# Load Balancer
ENABLE_LOAD_BALANCER=true
DB_HOST_PRIMARY=localhost
DB_HOST_SECONDARY=backup.localhost
WORKFLOW_API_HOST_PRIMARY=localhost
WORKFLOW_API_HOST_SECONDARY=backup.localhost
LB_HEALTH_CHECK_INTERVAL=30000

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# General Monitoring
ENABLE_MONITORING=true
METRICS_INTERVAL=30000
LOG_LEVEL=info
ENABLE_TRACING=false

# Prometheus
ENABLE_PROMETHEUS=true
PROMETHEUS_PORT=9090
PROMETHEUS_PATH=/metrics

# Alerting
ENABLE_ALERTS=true

# Slack Alerts
ENABLE_SLACK_ALERTS=true
SLACK_WEBHOOK_URL=your_slack_webhook_url
SLACK_ALERT_CHANNEL=#alerts

# Email Alerts
ENABLE_EMAIL_ALERTS=true
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=true
SMTP_USER=your_email@company.com
SMTP_PASS=your_email_password
ALERT_EMAIL_FROM=alerts@workflow-engine.com
ALERT_EMAIL_TO=admin@company.com

# Alert Thresholds
ALERT_FAILURE_RATE_THRESHOLD=0.1
ALERT_AVG_EXECUTION_TIME_THRESHOLD=1800000
ALERT_QUEUE_SIZE_THRESHOLD=50
ALERT_RESOURCE_UTILIZATION_THRESHOLD=0.8

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Authentication
ENABLE_AUTH=true
AUTH_TYPE=jwt

# JWT Configuration
JWT_SECRET=your_jwt_secret_key
JWT_EXPIRES_IN=24h
JWT_ALGORITHM=HS256

# API Key Authentication
API_KEY_HEADER=X-API-Key
API_KEYS=key1,key2,key3

# Authorization
ENABLE_AUTHZ=true
ENABLE_RBAC=true

# Encryption
ENABLE_ENCRYPTION=true
ENCRYPTION_ALGORITHM=aes-256-gcm
ENCRYPTION_KEY=your_encryption_key
ENCRYPT_SENSITIVE_DATA=true

# Rate Limiting
ENABLE_RATE_LIMITING=true
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL=true

# =============================================================================
# API CONFIGURATION
# =============================================================================

# Server Settings
API_PORT=3000
API_HOST=0.0.0.0

# CORS
ENABLE_CORS=true
CORS_ORIGIN=*
CORS_CREDENTIALS=true

# Compression
ENABLE_COMPRESSION=true
COMPRESSION_THRESHOLD=1024

# Request Settings
REQUEST_TIMEOUT=30000
BODY_LIMIT=10mb

# Swagger Documentation
ENABLE_SWAGGER=true
SWAGGER_PATH=/api-docs

# =============================================================================
# PERFORMANCE CONFIGURATION
# =============================================================================

# Clustering
ENABLE_CLUSTERING=false
CLUSTER_WORKERS=4

# Caching
ENABLE_CACHING=true
CACHE_TYPE=memory

# Redis Cache (if using Redis)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
CACHE_TTL=3600

# Memory Cache
MEMORY_CACHE_MAX_SIZE=100
MEMORY_CACHE_TTL=3600

# Optimization
ENABLE_GZIP=true
ENABLE_ETAG=true
ENABLE_KEEP_ALIVE=true
MAX_SOCKETS=50

# =============================================================================
# DEVELOPMENT CONFIGURATION
# =============================================================================

# Environment
NODE_ENV=development

# Development Features
ENABLE_HOT_RELOAD=false
DEBUG_MODE=false
MOCK_AGENTS=false
SEED_DATA=false
ENABLE_TEST_WORKFLOWS=false

# =============================================================================
# PRODUCTION OVERRIDES
# =============================================================================

# Uncomment and modify for production deployment

# NODE_ENV=production
# LOG_LEVEL=warn
# ENABLE_AUTH=true
# CLOUDFLARE_PROXY_ENABLED=true
# ENABLE_CLUSTERING=true
# ENABLE_MONITORING=true
# ENABLE_ALERTS=true
# DEBUG_MODE=false

# =============================================================================
# STAGING OVERRIDES
# =============================================================================

# Uncomment and modify for staging deployment

# NODE_ENV=staging
# LOG_LEVEL=info
# ENABLE_AUTH=true
# CLOUDFLARE_PROXY_ENABLED=false
# MOCK_AGENTS=true
# ENABLE_TEST_WORKFLOWS=true

