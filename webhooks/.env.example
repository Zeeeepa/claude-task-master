# Webhook Server Configuration
# Copy this file to .env and configure your values

# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# Server settings
WEBHOOK_PORT=3001
WEBHOOK_HOST=localhost
NODE_ENV=development

# Request limits
REQUEST_SIZE_LIMIT=10mb
REQUEST_TIMEOUT=30000
SHUTDOWN_TIMEOUT=10000

# CORS settings
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001

# =============================================================================
# WEBHOOK SECRETS
# =============================================================================

# GitHub webhook secret (configure in GitHub webhook settings)
GITHUB_WEBHOOK_SECRET=your_github_webhook_secret_here

# Linear webhook secret (configure in Linear webhook settings)
LINEAR_WEBHOOK_SECRET=your_linear_webhook_secret_here

# Codegen webhook secret (for internal system communication)
CODEGEN_WEBHOOK_SECRET=your_codegen_webhook_secret_here

# =============================================================================
# AUTHENTICATION
# =============================================================================

# Master API key for admin operations
WEBHOOK_MASTER_KEY=your_master_api_key_here

# Comma-separated list of valid API keys
WEBHOOK_API_KEYS=api_key_1,api_key_2,api_key_3

# JWT settings
JWT_SECRET=your_jwt_secret_here
JWT_EXPIRATION=24h

# Internal Codegen authentication key
CODEGEN_INTERNAL_KEY=your_internal_codegen_key_here

# =============================================================================
# EXTERNAL SERVICES
# =============================================================================

# AgentAPI configuration
AGENTAPI_URL=http://localhost:8000
AGENTAPI_KEY=your_agentapi_key_here
AGENTAPI_TIMEOUT=30000
AGENTAPI_RETRIES=3

# Linear API configuration
LINEAR_API_KEY=your_linear_api_key_here
LINEAR_API_URL=https://api.linear.app/graphql
LINEAR_TIMEOUT=10000

# GitHub API configuration
GITHUB_TOKEN=your_github_token_here
GITHUB_API_URL=https://api.github.com
GITHUB_TIMEOUT=10000

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database URL (optional - uses in-memory storage if not provided)
DATABASE_URL=postgresql://user:password@localhost:5432/webhooks

# Database type: memory, postgresql, mysql
DATABASE_TYPE=memory

# Connection settings
DB_MAX_CONNECTIONS=10
DB_CONNECTION_TIMEOUT=5000

# Data retention
EVENT_RETENTION_DAYS=7
CLEANUP_INTERVAL=86400000

# =============================================================================
# RATE LIMITING
# =============================================================================

# Rate limiting settings
RATE_LIMIT_WINDOW=900000
RATE_LIMIT_REQUESTS=100

# Enable/disable rate limiting
ENABLE_RATE_LIMITING=true

# =============================================================================
# PROCESSING CONFIGURATION
# =============================================================================

# Retry settings
MAX_RETRIES=3
RETRY_DELAYS=1000,5000,15000

# Queue settings
MAX_QUEUE_SIZE=1000
PROCESSING_TIMEOUT=60000

# Batch processing
BATCH_SIZE=10
BATCH_INTERVAL=5000

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log format: json, text
LOG_FORMAT=json

# Log destinations
LOG_CONSOLE=true
LOG_FILE=

# Request/response logging
LOG_REQUESTS=true
LOG_RESPONSES=false
LOG_BODIES=false

# Security logging
LOG_SECURITY_EVENTS=true
LOG_FAILED_AUTH=true

# =============================================================================
# MONITORING CONFIGURATION
# =============================================================================

# Health check settings
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# Metrics collection
COLLECT_METRICS=true
METRICS_INTERVAL=60000

# Alerting
ALERTING_ENABLED=false
ALERT_WEBHOOK_URL=

# Performance monitoring
SLOW_REQUEST_THRESHOLD=5000
ERROR_RATE_THRESHOLD=0.05

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Webhook processing features
ENABLE_GITHUB_WEBHOOKS=true
ENABLE_LINEAR_WEBHOOKS=true
ENABLE_CODEGEN_WEBHOOKS=true

# Processing features
ENABLE_RETRY_QUEUE=true
ENABLE_BATCH_PROCESSING=false
ENABLE_ASYNC_PROCESSING=true

# Security features
ENABLE_SIGNATURE_VALIDATION=true
ENABLE_RATE_LIMITING=true
ENABLE_REQUEST_LOGGING=true

# Integration features
ENABLE_AGENTAPI_INTEGRATION=true
ENABLE_LINEAR_INTEGRATION=true
ENABLE_GITHUB_INTEGRATION=true

# =============================================================================
# CODEGEN SPECIFIC CONFIGURATION
# =============================================================================

# Codegen user ID in Linear (for identifying codegen-assigned issues)
CODEGEN_USER_ID=your_codegen_user_id_here

# Codegen bot email (for notifications)
CODEGEN_BOT_EMAIL=codegen@yourcompany.com

# =============================================================================
# DEVELOPMENT/TESTING
# =============================================================================

# Enable debug mode
DEBUG=false

# Test mode (disables external API calls)
TEST_MODE=false

# Mock external services
MOCK_AGENTAPI=false
MOCK_LINEAR_API=false
MOCK_GITHUB_API=false

